<style>
/* === FINAL CLEAN OVERRIDES (–±–∞–π—Ä–ª–∞–ª, —Ç–∞–±, —á–∏–ø, —Å—É–º) === */

/* –¶–æ–Ω—Ö—ã–≥ –¥—ç—ç—Ä—ç—ç—Å –±—É—É–ª–≥–∞—Ö */
:root{ --y:160px; } /* 200/240 –±–æ–ª–≥–æ–∂ –±–æ–ª–Ω–æ */
#app.app{
  top:var(--y) !important;
  bottom:auto !important;
  right:16px !important;
}

/* –ú–µ–Ω—é –∑“Ø“Ø–Ω | –ß–∞—Ç –±–∞—Ä—É—É–Ω (swap) */
.app{
  grid-template-columns: var(--sidebar) 1fr !important;
  grid-template-areas:
    "topbar  topbar"
    "sidebar main" !important;
}
.sidebar{
  border-left:none !important;
  border-right:1px solid var(--border) !important;
}
.app.sidebar-hidden{ grid-template-columns:0 1fr !important; }
.app.sidebar-hidden .sidebar{ display:none !important; }

/* ‚Äú–Ø—Ä–∏–ª—Ü–∞—è‚Äù —Ö–æ—ë—Ä —Ç–æ–≤—á–∏–π–≥ –Ω—É—É—Ö */
#talkAI, #talkHuman{ display:none !important; }

/* –ò–ª–≥—ç—ç—Ö —Å—É–º–´–ì –ì–ê–†–ì–ê–ù–ê (”©–º–Ω”©—Ö –Ω—É—É—Å–∞–Ω –¥“Ø—Ä–º–∏–π–≥ —Ü—É—Ü–ª–∞–≤) */
#sendBtn{
  display:inline-flex !important;
  align-items:center !important;
  justify-content:center !important;
  min-width:34px !important; height:34px !important; padding:0 10px !important;
}

/* guideSection –±–∞–π—Ä–ª–∞–ª (reset) + —Ç–∞–±—ã–≥ –≥–∞—Ä—á–≥–∏–π–Ω —è–≥ –¥–æ—Ä sticky –±–æ–ª–≥–æ—Ö */
#guideSection{
  order:initial !important;
  margin-top:0 !important;
  position:static !important;
  max-height:none !important;
  overflow:visible !important;
  padding-top:8px !important;
}
#guideSection .menu-title{ padding:6px 12px 4px !important; margin:0 !important; }
#guideTabs{
  position:sticky !important; top:0 !important; z-index:1 !important;
  margin-top:4px !important;
  padding:0 0 6px !important;
  background:#fff !important;
  border-bottom:1px dashed var(--border) !important;
  display:flex !important; flex-direction:column !important; gap:6px !important;
}
#guideTabs button{
  height:36px !important; padding:6px 10px !important;
  border-radius:12px !important; font-size:13px !important; line-height:22px !important;
  text-align:left !important; white-space:nowrap !important; overflow:hidden !important; text-overflow:ellipsis !important;
}

/* 30 —á–∞—Ç ‚Äì –Ω–∞–º—Ö–∞–Ω, –Ω—ç–≥ –º”©—Ä */
#guideSection .chip-row{ display:grid !important; grid-template-columns:1fr !important; gap:4px !important; }
#guideSection .chip{
  height:34px !important; padding:6px 10px !important; border-radius:10px !impo
/* –•—É–¥–∞–ª–¥–∞–Ω –∞–≤—Å–∞–Ω ‚Äî “Ø—Ä–≥—ç–ª–∂ —Ö–∞—Ä–∞–≥–¥–∞–Ω–∞ + –º”©—Ä –±“Ø—Ö—ç–ª–¥—ç—ç –¥–∞—Ä–¥–∞–≥ */
#pinnedSection{ display:block !important; }
#pinnedList .item{ cursor:pointer; }
#pinnedList .item .title{ flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
// 1) –ú–æ–¥—É–ª—å –±“Ø—Ä–∏–π–Ω renderer-—ç—ç —ç–Ω–¥ —Ç–æ–¥–æ—Ä—Ö–æ–π–ª
const MODULES = {
  program(host){
    host.innerHTML = `
      <h3>üìú –•”©—Ç”©–ª–±”©—Ä</h3>
      <p>–≠–Ω–¥ —Ç–∞ ”©”©—Ä–∏–π–Ω —Ö”©—Ç”©–ª–±”©—Ä“Ø“Ø–¥—ç—ç —Ö–∞—Ä–Ω–∞.</p>
      <ul>
        <li>7 —Ö–æ–Ω–æ–≥–∏–π–Ω —Å–æ—Ä–∏–ª</li>
        <li>30 —Ö–æ–Ω–æ–≥–∏–π–Ω —á—ç–ª–ª–µ–Ω–∂</li>
      </ul>`;
  },
  service(host){
    host.innerHTML = `
      <h3>üõé “Æ–π–ª—á–∏–ª–≥—ç—ç</h3>
      <button class="icon-btn">–ó–∞—Ö–∏–∞–ª–∞—Ö</button>`;
  },
  test(host){
    host.innerHTML = `
      <h3>‚úÖ –¢–µ—Å—Ç</h3>
      <button class="icon-btn" id="startTest">–¢–µ—Å—Ç —ç—Ö–ª“Ø“Ø–ª—ç—Ö</button>`;
    document.getElementById('startTest')?.addEventListener('click', ()=>{
      host.innerHTML = '<p>–¢–µ—Å—Ç —ç—Ö—ç–ª–ª—ç—ç‚Ä¶ (demo)</p>';
    });
  },
  edu(host){
    host.innerHTML = `<h3>üìò –°—ç—Ç–≥—ç–ª–∏–π–Ω –±–æ–ª–æ–≤—Å—Ä–æ–ª</h3>
      <p>–°—É—Ä–≥–∞–º–∂, –±–æ–≥–∏–Ω–æ –Ω–∏–π—Ç–ª—ç–ª“Ø“Ø–¥‚Ä¶</p>`;
  },
  journal(host){
    host.innerHTML = `<h3>üìù ”®–¥—Ä–∏–π–Ω —Ç—ç–º–¥—ç–≥–ª—ç–ª</h3>
      <textarea style="width:100%;height:160px"></textarea>
      <div style="margin-top:8px"><button class="icon-btn">–•–∞–¥–≥–∞–ª–∞—Ö</button></div>`;
  },
  account(host){
    host.innerHTML = `<h3>üë§ –ú–∏–Ω–∏–π –±“Ø—Ä—Ç–≥—ç–ª</h3>
      <p>–ù—ç—Ä: ${userNameEl.textContent}</p>
      <p>–ö–æ–¥: ${userCodeEl.textContent}</p>`;
  },
  secret(host){
    host.innerHTML = `<h3>üîè –ú–∏–Ω–∏–π –Ω—É—É—Ü</h3>
      <p>–≠–Ω–¥ —Ç–∞ –Ω—É—É—Ü —Ç—ç–º–¥—ç–≥–ª—ç–ª—ç—ç —Ö–∞–¥–≥–∞–ª–Ω–∞.</p>`;
  }
};

// 2) –ù—ç–≥ –≥–∞–∑–∞—Ä –Ω–∏–π—Ç–ª—ç–≥ –Ω—ç—ç—Ö —Ñ—É–Ω–∫—Ü
function openModule(key, title){
  topTitle.textContent = '–û—é—É–Ω—Å–∞–Ω–∞–∞ —á–∞—Ç ‚Äî ' + title;
  chatName.textContent = title;
  chatSub.textContent  = '‚Äî';
  chatBody.innerHTML   = '<div id="moduleHost" style="padding:10px"></div>';
  const host = document.getElementById('moduleHost');
  (MODULES[key] || ((h)=> h.innerHTML='<p>–ê–≥—É—É–ª–≥–∞ –±—ç–ª–¥—ç—ç–≥“Ø–π –±–∞–π–Ω–∞.</p>'))(host);
}

// 3) “Æ–Ω–¥—Å—ç–Ω –º–µ–Ω—é –¥—ç—ç—Ä –¥–∞—Ä–≤–∞–ª openModule() —Ä—É—É —è–≤—É—É–ª
mainMenus.addEventListener('click',(e)=>{
  const btn = e.target.closest('.btn'); if(!btn) return;
  const key = btn.dataset.main;

  if (key === 'guide'){
    guideSec.hidden = !guideSec.hidden;
    if (!guideSec.hidden){ /* ... ”©–º–Ω”©—Ö —á–∏–Ω—å —Ö—ç–≤—ç—ç—Ä ... */ applyGuideColors(); }
    return;
  }
  guideSec.hidden = true;
  openModule(key, btn.innerText.trim());
});
/* “Æ–Ω–¥—Å—ç–Ω 8 –º–µ–Ω—é –±–∏—á–≤—ç—Ä–∏–π–≥ —Ç”©–≤–¥ –Ω—å */
#mainMenus .btn{ justify-content:center; }
#mainMenus .btn .t{ text-align:center; }
/* TOPBAR –≥–∞—Ä—á–≥–∏–π–≥ —è–≥ –≥–æ–ª–¥, —Ç–æ–≥—Ç–≤–æ—Ä—Ç–æ–π –±–∞–π–ª–≥–∞—Ö ‚Äî CSS –õ–ê–í–õ–ê–ì–ê–ê */
.topbar{ position: relative !important; height: 52px !important; }
.brand{
  position: absolute !important;
  left: 50% !important; top: 50% !important;
  transform: translate(-50%,-50%) !important; /* x –±–∞ y-—Ä —Ç”©–≤–¥ */
  max-width: 60% !important;                  /* —É—Ä—Ç –Ω—ç—Ä–∏–π–≥ ... –±–æ–ª–≥–æ–Ω–æ */
  text-align: center !important;
  pointer-events: none !important;            /* –∑“Ø“Ø–Ω/–±–∞—Ä—É—É–Ω —Ç–æ–≤—á –¥–∞—Ä–≥–∞—Ö–∞–¥ —Å–∞–∞–¥ –±–æ–ª–æ—Ö–≥“Ø–π */
}
.brand .title{
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
}
.left-actions, .right-actions{ position: relative !important; z-index: 2 !important; }
